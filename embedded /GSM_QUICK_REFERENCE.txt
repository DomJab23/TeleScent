â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         GSM VERIFICATION QUICK REFERENCE                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ HARDWARE CHECKLIST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â˜ SIM800L module connected to ESP32
   - GPIO 8 (TX) â†’ SIM800L RX
   - GPIO 9 (RX) â†’ SIM800L TX
   - GND â†’ GND

â˜ Power supply connected (3.7-4.2V, 2A+)
   âš ï¸  NOT USB power! NOT 5V!
   
â˜ Antenna connected to SIM800L

â˜ SIM card inserted
   - Activated & has data plan
   - PIN lock disabled
   - Tested in phone first

â˜ 1000ÂµF capacitor near SIM800L VCC (recommended)


ğŸ”§ COMMANDS TO RUN GSM TEST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Connect ESP32 to computer via USB

# Terminal 1 - Build and upload test
cd "/home/klaus/TeleScent/TeleScent/embedded /enose"
export PATH="$HOME/.local/bin:$PATH"
pio run -e gsm_test -t upload

# Terminal 2 - Monitor output  
pio device monitor

# Or combined (upload then monitor):
pio run -e gsm_test -t upload && pio device monitor


ğŸ“Š WHAT TO LOOK FOR IN SERIAL OUTPUT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Test 1: AT Command        â†’ Module responds
âœ“ Test 2: Signal Quality    â†’ RSSI > 10 (not 99)
âœ“ Test 3: Network Reg        â†’ Status 1 or 5
âœ“ Test 4: GPRS Connection    â†’ Data connection active
âœ“ Test 5: TCP Connection     â†’ Connected to server
âœ“ Test 6: Data Send          â†’ Test data transmitted


ğŸš¨ COMMON ISSUES & FIXES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Problem: No response from module
  â†’ Check power supply (needs 2A capability)
  â†’ Verify RX/TX are crossed (ESP TX â†’ GSM RX)
  â†’ Look for LED on SIM800L (should blink)

Problem: RSSI = 99 (no signal)
  â†’ Wait 30-60 seconds after power on
  â†’ Check antenna is connected
  â†’ Move to window or outside
  â†’ Verify SIM works in phone

Problem: Registration failed
  â†’ Disable PIN on SIM card
  â†’ Check SIM is activated
  â†’ Verify carrier supports IoT/M2M devices

Problem: GPRS failed
  â†’ Check SIM has active data plan
  â†’ Verify account has credit
  â†’ May need manual APN configuration

Problem: TCP connection failed
  â†’ Verify server hostname in test_gsm.cpp:
    #define HOST_NAME "your-server.com"
    #define PORT 443
  â†’ Check server is accessible from internet
  â†’ Try IP address instead of hostname


ğŸ” HOW TO VERIFY SIGNAL IS BEING SENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. MODULE LEVEL (Physical verification):
   â€¢ SIM800L LED blinks slowly (every 3s) = Connected
   â€¢ Fast blinking = Searching for network
   â€¢ No blink = No power or failed
   
2. AT COMMAND LEVEL (Serial monitor):
   â€¢ AT+CSQ returns signal strength
   â€¢ AT+CREG? shows network registration
   â€¢ AT+CIPSTATUS shows TCP connection state
   
3. NETWORK LEVEL (Data transmission):
   â€¢ Test sends JSON data to server
   â€¢ Check server logs for received data
   â€¢ Monitor SIM card data usage online
   
4. APPLICATION LEVEL (Your backend):
   â€¢ Login to ngrok dashboard: https://dashboard.ngrok.com
   â€¢ View "Traffic Inspector" for HTTP requests
   â€¢ Or check your backend logs/database


ğŸ“± SIM800L LED STATUS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Blink Pattern          Status
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Off                    No power / Module failed
Fast (1s interval)     Searching for network
Slow (3s interval)     Registered on network âœ“
Very fast              Transmitting data âœ“


âš¡ POWER SUPPLY SOLUTIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Option 1: 3.7V Li-Po Battery (1000mAh+)
  â†’ Most reliable for testing
  â†’ Use TP4056 charging module

Option 2: LM2596 Buck Converter
  â†’ Input: 5V-12V
  â†’ Output: Set to 4.0V
  â†’ Connect to wall adapter (2A+)

Option 3: Bench Power Supply
  â†’ Set to 4.0V
  â†’ Current limit: 2A+


ğŸ“ EDIT TEST CONFIGURATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
File: enose/test/test_gsm.cpp

Update these lines:
  #define HOST_NAME "your-server.ngrok-free.dev"
  #define PORT 443  // or 80 for HTTP


ğŸ”„ AFTER SUCCESSFUL TEST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Document your working configuration
2. Switch back to main program:
   pio run -e arduino_nano_esp32 -t upload
3. Uncomment init_GSM() in main.cpp setup()
4. Update HOST_NAME and PORT in main.h
5. Integrate GSM sending into your sensor loop


ğŸ“– DETAILED GUIDE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
See: GSM_TEST_README.md for complete documentation


ğŸ’¡ TIPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ Always test SIM card in phone first
â€¢ Wait 60 seconds after power-on before testing
â€¢ Check LED patterns for quick diagnosis
â€¢ Use Serial Monitor at 115200 baud
â€¢ Monitor your carrier's data usage dashboard
â€¢ Keep antenna away from metal/electronics
â€¢ Add 1000ÂµF capacitor for power stability


Need help? Check GSM_TEST_README.md for troubleshooting!
